var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function d(){return f("")}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let m;function b(t){m=t}function $(){if(!m)throw new Error("Function called outside component initialization");return m}function g(t){return $().$$.context.get(t)}const y=[],k=[],w=[],v=[],x=Promise.resolve();let _=!1;function S(){_||(_=!0,x.then(j))}function E(t){w.push(t)}const H=new Set;let O=0;function j(){const t=m;do{for(;O<y.length;){const t=y[O];O++,b(t),R(t.$$)}for(b(null),y.length=0,O=0;k.length;)k.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];H.has(e)||(H.add(e),e())}w.length=0}while(y.length);for(;v.length;)v.pop()();_=!1,H.clear(),b(t)}function R(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const T=new Set;let A;function M(){A={r:0,c:[],p:A}}function q(){A.r||r(A.c),A=A.p}function F(t,e){t&&t.i&&(T.delete(t),t.i(e))}function C(t,e,n,r){if(t&&t.o){if(T.has(t))return;T.add(t),A.c.push((()=>{T.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function z(t){t&&t.c()}function L(t,n,c,a){const{fragment:i,on_mount:s,on_destroy:l,after_update:u}=t.$$;i&&i.m(n,c),a||E((()=>{const n=s.map(e).filter(o);l?l.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(E)}function N(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(e,o,c,a,i,s,u,f=[-1]){const h=m;b(e);const d=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||h.$$.root};u&&u(d.root);let p=!1;if(d.ctx=c?c(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),p&&function(t,e){-1===t.$$.dirty[0]&&(y.push(t),S(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();o.intro&&F(e.$$.fragment),L(e,o.target,o.anchor,o.customElement),j()}b(h)}class W{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const I=[];function P(e,n=t){let r;const o=new Set;function a(t){if(c(e,t)&&(e=t,r)){const t=!I.length;for(const t of o)t[1](),I.push(t,e);if(t){for(let t=0;t<I.length;t+=2)I[t][0](I[t+1]);I.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(c,i=t){const s=[c,i];return o.add(s),1===o.size&&(r=n(a)||t),c(e),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}function D(t,e=!1){return(t=t.slice(t.startsWith("/#")?2:0,t.endsWith("/*")?-2:void 0)).startsWith("/")||(t="/"+t),"/"===t&&(t=""),e&&!t.endsWith("/")&&(t+="/"),t}function K(t,e,n){if(""===n)return t;if("/"===n[0])return n;let r=t=>t.split("/").filter((t=>""!==t)),o=r(t);return"/"+(e?r(e):[]).map(((t,e)=>o[e])).join("/")+"/"+n}function B(t,e,n,r){let o=[e,"data-"+e].reduce(((e,r)=>{let o=t.getAttribute(r);return n&&t.removeAttribute(r),null===o?e:o}),!1);return!r&&""===o||(o||r||!1)}function J(t){let e=t.split("&").map((t=>t.split("="))).reduce(((t,e)=>{let n=e[0];if(!n)return t;let r=!(e.length>1)||e[e.length-1];return"string"==typeof r&&r.includes(",")&&(r=r.split(",")),void 0===t[n]?t[n]=[r]:t[n].push(r),t}),{});return Object.entries(e).reduce(((t,e)=>(t[e[0]]=e[1].length>1?e[1]:e[1][0],t)),{})}function Z(t,e){return t?e+t:""}function G(t){throw new Error("[Tinro] "+t)}var Q,U,V,X={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(t,e,n,r){return t===this.HISTORY?e&&e():t===this.HASH?n&&n():r&&r()},getDefault(){return window&&"srcdoc"!==window.location.pathname?this.HISTORY:this.MEMORY}},tt="",et=function(){let t,e=X.getDefault(),n=n=>t&&t(nt(e)),r=t=>{t&&(e=t),window.onhashchange=window.onpopstate=Q=null,e!==X.OFF&&X.run(e,(t=>window.onpopstate=n),(t=>window.onhashchange=n))&&n()},o=t=>{let n=Object.assign(nt(e),t);return n.path+Z(function(t){return Object.entries(t).map((([t,e])=>e?!0===e?t:`${t}=${Array.isArray(e)?e.join(","):e}`:null)).filter((t=>t)).join("&")}(n.query),"?")+Z(n.hash,"#")};return{mode:r,get:t=>nt(e),go(t,r){(function(t,e,n){!n&&(U=V);let r=t=>history[(n?"replace":"push")+"State"]({},"",t);X.run(t,(t=>r(tt+e)),(t=>r(`#${e}`)),(t=>Q=e))})(e,t,r),n()},start(e){t=e,r()},stop(){t=null,r(X.OFF)},set(t){this.go(o(t),!t.path)},methods(){return function(t){let e=()=>t.get().query,n=e=>t.set({query:e}),r=t=>n(t(e())),o=e=>t.set({hash:e});return{hash:{get:()=>t.get().hash,set:o,clear:()=>o("")},query:{replace:n,clear:()=>n(""),get:t=>t?e()[t]:e(),set(t,e){r((n=>(n[t]=e,n)))},delete(t){r((e=>(e[t]&&delete e[t],e)))}}}}(this)},base:t=>tt=t}}();function nt(t){let e=window.location,n=X.run(t,(t=>(tt?e.pathname.replace(tt,""):e.pathname)+e.search+e.hash),(t=>String(e.hash.slice(1)||"/")),(t=>Q||"/")),r=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return V=n,{url:n,from:U,path:r[1]||"",query:J(r[2]||""),hash:r[3]||""}}var rt=function(){let{subscribe:t}=P(et.get(),(t=>{et.start(t);let e=function(t){let e=e=>{let n=e.target.closest("a[href]"),r=n&&B(n,"target",!1,"_self"),o=n&&B(n,"tinro-ignore"),c=e.ctrlKey||e.metaKey||e.altKey||e.shiftKey;if("_self"==r&&!o&&!c&&n){let r=n.getAttribute("href").replace(/^\/#/,"");/^\/\/|^#|^[a-zA-Z]+:/.test(r)||(e.preventDefault(),t(r.startsWith("/")?r:n.href.replace(window.location.origin,"")))}};return addEventListener("click",e),()=>removeEventListener("click",e)}(et.go);return()=>{et.stop(),e()}}));return{subscribe:t,goto:et.go,params:ot,meta:st,useHashNavigation:t=>et.mode(t?X.HASH:X.HISTORY),mode:{hash:()=>et.mode(X.HASH),history:()=>et.mode(X.HISTORY),memory:()=>et.mode(X.MEMORY)},base:et.base,location:et.methods()}}();function ot(){return g("tinro").meta.params}var ct="tinro",at=lt({pattern:"",matched:!0});function it(t){let e=g(ct)||at;(e.exact||e.fallback)&&G(`${t.fallback?"<Route fallback>":`<Route path="${t.path}">`}  can't be inside ${e.fallback?"<Route fallback>":`<Route path="${e.path||"/"}"> with exact path`}`);let n=t.fallback?"fallbacks":"childs",r=P({}),o=lt({fallback:t.fallback,parent:e,update(t){o.exact=!t.path.endsWith("/*"),o.pattern=D(`${o.parent.pattern||""}${t.path}`),o.redirect=t.redirect,o.firstmatch=t.firstmatch,o.breadcrumb=t.breadcrumb,o.match()},register:()=>(o.parent[n].add(o),async()=>{o.parent[n].delete(o),o.parent.activeChilds.delete(o),o.router.un&&o.router.un(),o.parent.match()}),show:()=>{t.onShow(),!o.fallback&&o.parent.activeChilds.add(o)},hide:()=>{t.onHide(),o.parent.activeChilds.delete(o)},match:async()=>{o.matched=!1;let{path:e,url:n,from:c,query:a}=o.router.location,i=function(t,e){t=D(t,!0),e=D(e,!0);let n=[],r={},o=!0,c=t.split("/").map((t=>t.startsWith(":")?(n.push(t.slice(1)),"([^\\/]+)"):t)).join("\\/"),a=e.match(new RegExp(`^${c}$`));return a||(o=!1,a=e.match(new RegExp(`^${c}`))),a?(n.forEach(((t,e)=>r[t]=a[e+1])),{exact:o,params:r,part:a[0].slice(0,-1)}):null}(o.pattern,e);if(!o.fallback&&i&&o.redirect&&(!o.exact||o.exact&&i.exact)){let t=K(e,o.parent.pattern,o.redirect);return rt.goto(t,!0)}o.meta=i&&{from:c,url:n,query:a,match:i.part,pattern:o.pattern,breadcrumbs:o.parent.meta&&o.parent.meta.breadcrumbs.slice()||[],params:i.params,subscribe:r.subscribe},o.breadcrumb&&o.meta&&o.meta.breadcrumbs.push({name:o.breadcrumb,path:i.part}),r.set(o.meta),!i||o.fallback||!(!o.exact||o.exact&&i.exact)||o.parent.firstmatch&&o.parent.matched?o.hide():(t.onMeta(o.meta),o.parent.matched=!0,o.show()),i&&o.showFallbacks()}});return a=ct,i=o,$().$$.context.set(a,i),c=()=>o.register(),$().$$.on_mount.push(c),o;var c,a,i}function st(){return t=ct,$().$$.context.has(t)?g(ct).meta:G("meta() function must be run inside any `<Route>` child component only");var t}function lt(t){let e={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await(S(),x),this.childs.size>0&&0==this.activeChilds.size||0==this.childs.size&&this.fallbacks.size>0)){let t=this;for(;0==t.fallbacks.size;)if(t=t.parent,!t)return;t&&t.fallbacks.forEach((t=>{if(t.redirect){let e=K("/",t.parent.pattern,t.redirect);rt.goto(e,!0)}else t.show()}))}},start(){this.router.un||(this.router.un=rt.subscribe((t=>{this.router.location=t,null!==this.pattern&&this.match()})))},match(){this.showFallbacks()}};return Object.assign(e,t),e.start(),e}const ut=t=>({params:2&t,meta:4&t}),ft=t=>({params:t[1],meta:t[2]});function ht(t){let e;const n=t[9].default,r=function(t,e,n,r){if(t){const o=a(t,e,n,r);return t[0](o)}}(n,t,t[8],ft);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,o){r&&r.p&&(!e||262&o)&&function(t,e,n,r,o,c){if(o){const i=a(e,n,r,c);t.p(i,o)}}(r,n,t,t[8],e?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(n,t[8],o,ut):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[8]),ft)},i(t){e||(F(r,t),e=!0)},o(t){C(r,t),e=!1},d(t){r&&r.d(t)}}}function dt(t){let e,n,r=t[0]&&ht(t);return{c(){r&&r.c(),e=d()},m(t,o){r&&r.m(t,o),s(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&F(r,1)):(r=ht(t),r.c(),F(r,1),r.m(e.parentNode,e)):r&&(M(),C(r,1,1,(()=>{r=null})),q())},i(t){n||(F(r),n=!0)},o(t){C(r),n=!1},d(t){r&&r.d(t),t&&l(e)}}}function pt(t,e,n){let{$$slots:r={},$$scope:o}=e,{path:c="/*"}=e,{fallback:a=!1}=e,{redirect:i=!1}=e,{firstmatch:s=!1}=e,{breadcrumb:l=null}=e,u=!1,f={},h={};const d=it({fallback:a,onShow(){n(0,u=!0)},onHide(){n(0,u=!1)},onMeta(t){n(2,h=t),n(1,f=h.params)}});return t.$$set=t=>{"path"in t&&n(3,c=t.path),"fallback"in t&&n(4,a=t.fallback),"redirect"in t&&n(5,i=t.redirect),"firstmatch"in t&&n(6,s=t.firstmatch),"breadcrumb"in t&&n(7,l=t.breadcrumb),"$$scope"in t&&n(8,o=t.$$scope)},t.$$.update=()=>{232&t.$$.dirty&&d.update({path:c,redirect:i,firstmatch:s,breadcrumb:l})},[u,f,h,c,a,i,s,l,o,r]}class mt extends W{constructor(t){super(),Y(this,t,pt,dt,c,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}}function bt(t){return fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({query:t})}).then((t=>t.json())).then((t=>t.data))}function $t(t,e,n){const r=t.slice();return r[2]=e[n],r}function gt(e){return{c:t,m:t,p:t,d:t}}function yt(t){let e,n=t[1].posts,r=[];for(let e=0;e<n.length;e+=1)r[e]=kt($t(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=d()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);s(t,e,n)},p(t,o){if(1&o){let c;for(n=t[1].posts,c=0;c<n.length;c+=1){const a=$t(t,n,c);r[c]?r[c].p(a,o):(r[c]=kt(a),r[c].c(),r[c].m(e.parentNode,e))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t),t&&l(e)}}}function kt(e){let n,r,o,c,a,d,p,m=e[2].title+"",b=e[2].body+"";return{c(){n=u("section"),r=u("aside"),o=u("h3"),c=f(m),a=h(),d=f(b),p=h()},m(t,e){s(t,n,e),i(n,r),i(r,o),i(o,c),i(r,a),i(r,d),i(n,p)},p:t,d(t){t&&l(n)}}}function wt(e){return{c:t,m:t,p:t,d:t}}function vt(e){let n,r,o,c,a,f={ctx:e,current:null,token:null,hasCatch:!1,pending:wt,then:yt,catch:gt,value:1};return function(t,e){const n=e.token={};function r(t,r,o,c){if(e.token!==n)return;e.resolved=c;let a=e.ctx;void 0!==o&&(a=a.slice(),a[o]=c);const i=t&&(e.current=t)(a);let s=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(M(),C(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),q())})):e.block.d(1),i.c(),F(i,1),i.m(e.mount(),e.anchor),s=!0),e.block=i,e.blocks&&(e.blocks[r]=i),s&&j()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=$();if(t.then((t=>{b(n),r(e.then,1,e.value,t),b(null)}),(t=>{if(b(n),r(e.catch,2,e.error,t),b(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}(bt(e[0]),f),{c(){n=u("header"),n.innerHTML="<h1>TIL</h1>",r=h(),o=u("main"),c=u("section"),c.innerHTML='<h2>Posts</h2> \n    <a href="/new"><b>New Post</b></a>',a=h(),f.block.c(),p(c,"id","sub-heading"),p(c,"class","svelte-19wyro7")},m(t,e){s(t,n,e),s(t,r,e),s(t,o,e),i(o,c),i(o,a),f.block.m(o,f.anchor=null),f.mount=()=>o,f.anchor=null},p(t,[n]){!function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(f,e=t,n)},i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(o),f.block.d(),f.token=null,f=null}}}function xt(t){return["\nquery {\n  posts {\n    _id\n    title\n    body\n  }\n}\n  "]}class _t extends W{constructor(t){super(),Y(this,t,xt,vt,c,{})}}function St(e){let n,r,o,c,a,f,d;return{c(){n=u("header"),n.innerHTML="<h1>New Post</h1>",r=h(),o=u("main"),c=u("section"),a=u("form"),a.innerHTML='<div><label for="title">Title</label> \n        <input id="title" name="title"/></div> \n      <div><textarea placeholder="content" id="body" name="body"></textarea></div> \n      <div><button type="submit">Submit</button></div>'},m(t,l){var u,h,p,m,b;s(t,n,l),s(t,r,l),s(t,o,l),i(o,c),i(c,a),f||(u=a,h="submit",b=e[0],p=function(t){return t.preventDefault(),b.call(this,t)},u.addEventListener(h,p,m),d=()=>u.removeEventListener(h,p,m),f=!0)},p:t,i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(o),f=!1,d()}}}function Et(t){return[function(t){const e=new FormData(t.target),[n,r]=e.values();bt(function(t,e){return`\nmutation {\n  createPost(title:"${t}", body:"${e}") {\n    ok\n  }\n}`}(n,r)).then((t=>console.log(t))).then((t=>rt.goto("/")))}]}class Ht extends W{constructor(t){super(),Y(this,t,Et,St,c,{})}}function Ot(t){let e,n;return e=new _t({}),{c(){z(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function jt(t){let e,n;return e=new Ht({}),{c(){z(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Rt(t){let e,n,r,o,c,a;return r=new mt({props:{path:"/",$$slots:{default:[Ot]},$$scope:{ctx:t}}}),c=new mt({props:{path:"/new",$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){e=u("link"),n=h(),z(r.$$.fragment),o=h(),z(c.$$.fragment),p(e,"rel","stylesheet"),p(e,"href","https://unpkg.com/mvp.css")},m(t,l){i(document.head,e),s(t,n,l),L(r,t,l),s(t,o,l),L(c,t,l),a=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n);const o={};1&e&&(o.$$scope={dirty:e,ctx:t}),c.$set(o)},i(t){a||(F(r.$$.fragment,t),F(c.$$.fragment,t),a=!0)},o(t){C(r.$$.fragment,t),C(c.$$.fragment,t),a=!1},d(t){l(e),t&&l(n),N(r,t),t&&l(o),N(c,t)}}}return new class extends W{constructor(t){super(),Y(this,t,null,Rt,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
